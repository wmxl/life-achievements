# 404 é”™è¯¯ä¿®å¤è¯´æ˜

## é—®é¢˜æè¿°

åœ¨æœ¬åœ°å¼€å‘æ—¶ï¼Œç‚¹å‡»æ¸¸æˆã€ç”µå½±æˆ–ä¹¦ç±é“¾æ¥ä¼šå‡ºç° 404 é”™è¯¯ã€‚

## åŸå› åˆ†æ

é—®é¢˜å‡ºåœ¨ `astro.config.mjs` ä¸­é…ç½®äº† `base: '/life-achievements'`ã€‚è¿™ä¸ªé…ç½®æ˜¯ä¸ºäº†éƒ¨ç½²åˆ° GitHub Pages çš„å­è·¯å¾„ï¼ˆå¦‚ `username.github.io/life-achievements`ï¼‰è€Œè®¾ç½®çš„ã€‚

ä½†åœ¨æœ¬åœ°å¼€å‘æ—¶ï¼š
- å¼€å‘æœåŠ¡å™¨è¿è¡Œåœ¨ `http://localhost:4321/`ï¼ˆæ ¹è·¯å¾„ï¼‰
- è€Œé“¾æ¥å´æŒ‡å‘ `/games`ã€`/movies` ç­‰ï¼ˆæ²¡æœ‰åŠ  base å‰ç¼€ï¼‰
- å¯¼è‡´å®é™…è®¿é—®çš„è·¯å¾„ä¸åŒ¹é…ï¼Œå‡ºç° 404

## è§£å†³æ–¹æ¡ˆ

å·²å®æ–½ä»¥ä¸‹ä¿®å¤ï¼š

### 1. æ™ºèƒ½ base è·¯å¾„é…ç½®

ä¿®æ”¹ `astro.config.mjs`ï¼Œæ ¹æ®ç¯å¢ƒè‡ªåŠ¨åˆ‡æ¢ï¼š

```javascript
export default defineConfig({
  site: 'https://your-username.github.io',
  // ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ /life-achievementsï¼Œå¼€å‘ç¯å¢ƒä½¿ç”¨ /
  base: import.meta.env.PROD ? '/life-achievements' : '/',
  outDir: './dist',
});
```

### 2. æ›´æ–°æ‰€æœ‰é“¾æ¥

åœ¨æ‰€æœ‰é¡µé¢å’Œç»„ä»¶ä¸­ä½¿ç”¨ `import.meta.env.BASE_URL` æ¥åŠ¨æ€ç”Ÿæˆæ­£ç¡®çš„é“¾æ¥ï¼š

**ä¿®æ”¹å‰ï¼š**
```astro
<a href="/games">æ¸¸æˆ</a>
<a href={`/games/${game.slug}`}>æ¸¸æˆè¯¦æƒ…</a>
```

**ä¿®æ”¹åï¼š**
```astro
const base = import.meta.env.BASE_URL;

<a href={`${base}games`}>æ¸¸æˆ</a>
<a href={`${base}games/${game.slug}`}>æ¸¸æˆè¯¦æƒ…</a>
```

### 3. ä¿®æ”¹çš„æ–‡ä»¶åˆ—è¡¨

- âœ… `astro.config.mjs` - æ™ºèƒ½ base é…ç½®
- âœ… `src/components/Header.astro` - å¯¼èˆªé“¾æ¥
- âœ… `src/pages/index.astro` - é¦–é¡µæ‰€æœ‰é“¾æ¥
- âœ… `src/pages/games.astro` - æ¸¸æˆåˆ—è¡¨é“¾æ¥
- âœ… `src/pages/movies.astro` - ç”µå½±åˆ—è¡¨é“¾æ¥
- âœ… `src/pages/books.astro` - ä¹¦ç±åˆ—è¡¨é“¾æ¥
- âœ… `src/pages/games/[slug].astro` - æ¸¸æˆè¯¦æƒ…è¿”å›é“¾æ¥
- âœ… `src/pages/movies/[slug].astro` - ç”µå½±è¯¦æƒ…è¿”å›é“¾æ¥
- âœ… `src/pages/books/[slug].astro` - ä¹¦ç±è¯¦æƒ…è¿”å›é“¾æ¥

## éªŒè¯ä¿®å¤

### æœ¬åœ°å¼€å‘ç¯å¢ƒ

```bash
npm run dev
```

è®¿é—® http://localhost:4321ï¼Œæ‰€æœ‰é“¾æ¥åº”è¯¥æ­£å¸¸å·¥ä½œï¼š
- âœ… é¦–é¡µå¯¼èˆª
- âœ… ç‚¹å‡»æ¸¸æˆ/ç”µå½±/ä¹¦ç±å¡ç‰‡
- âœ… æŸ¥çœ‹è¯¦æƒ…é¡µ
- âœ… è¿”å›åˆ—è¡¨é¡µ

### ç”Ÿäº§ç¯å¢ƒï¼ˆGitHub Pagesï¼‰

```bash
npm run build
npm run preview
```

æˆ–æ¨é€åˆ° GitHub åï¼Œè®¿é—®ï¼š
`https://your-username.github.io/life-achievements`

æ‰€æœ‰é“¾æ¥éƒ½ä¼šè‡ªåŠ¨åŠ ä¸Š `/life-achievements` å‰ç¼€ã€‚

## å·¥ä½œåŸç†

### ç¯å¢ƒå˜é‡

Astro æä¾›äº†ä¸¤ä¸ªæœ‰ç”¨çš„ç¯å¢ƒå˜é‡ï¼š

1. **`import.meta.env.PROD`**
   - å¼€å‘ç¯å¢ƒï¼š`false`
   - ç”Ÿäº§ç¯å¢ƒï¼š`true`

2. **`import.meta.env.BASE_URL`**
   - å¼€å‘ç¯å¢ƒï¼š`/`
   - ç”Ÿäº§ç¯å¢ƒï¼š`/life-achievements/`ï¼ˆå¦‚æœé…ç½®äº† baseï¼‰

### è‡ªåŠ¨è·¯å¾„å¤„ç†

é€šè¿‡åœ¨é…ç½®ä¸­è®¾ç½®ï¼š
```javascript
base: import.meta.env.PROD ? '/life-achievements' : '/',
```

- **æœ¬åœ°å¼€å‘**ï¼šbase ä¸º `/`ï¼Œé“¾æ¥å˜æˆ `/games`ã€`/movies` ç­‰
- **ç”Ÿäº§éƒ¨ç½²**ï¼šbase ä¸º `/life-achievements/`ï¼Œé“¾æ¥å˜æˆ `/life-achievements/games` ç­‰

## æ³¨æ„äº‹é¡¹

### å¦‚æœéƒ¨ç½²åˆ°æ ¹åŸŸå

å¦‚æœä½ çš„ GitHub Pages æ˜¯ `username.github.io`ï¼ˆä¸æ˜¯å­ç›®å½•ï¼‰ï¼Œéœ€è¦ä¿®æ”¹ `astro.config.mjs`ï¼š

```javascript
export default defineConfig({
  site: 'https://username.github.io',
  // æ³¨é‡Šæ‰æˆ–åˆ é™¤ base é…ç½®
  // base: import.meta.env.PROD ? '/life-achievements' : '/',
  outDir: './dist',
});
```

### å¦‚æœæ›´æ”¹ä»“åº“å

å¦‚æœä»“åº“åä¸æ˜¯ `life-achievements`ï¼Œéœ€è¦ä¿®æ”¹ï¼š

```javascript
base: import.meta.env.PROD ? '/ä½ çš„ä»“åº“å' : '/',
```

## åç»­ä½¿ç”¨

ä¿®å¤åï¼Œä½ å¯ä»¥æ­£å¸¸ä½¿ç”¨ï¼š

1. **æœ¬åœ°å¼€å‘**ï¼š
   ```bash
   npm run dev
   # è®¿é—® http://localhost:4321
   ```

2. **æ¨é€éƒ¨ç½²**ï¼š
   ```bash
   git add .
   git commit -m "ä¿®å¤é“¾æ¥"
   git push
   # è‡ªåŠ¨éƒ¨ç½²åˆ° https://username.github.io/life-achievements
   ```

æ— éœ€æ‰‹åŠ¨åˆ‡æ¢é…ç½®ï¼ğŸ‰

## æŠ€æœ¯ç»†èŠ‚

### Astro çš„ base è·¯å¾„å¤„ç†

Astro ä¼šè‡ªåŠ¨ä¸ºä»¥ä¸‹å†…å®¹æ·»åŠ  base å‰ç¼€ï¼š
- `<a href>` æ ‡ç­¾
- `<script src>` æ ‡ç­¾
- `<link href>` æ ‡ç­¾
- `public/` ç›®å½•ä¸‹çš„é™æ€èµ„æº

ä½†éœ€è¦æ‰‹åŠ¨å¤„ç†ï¼š
- åŠ¨æ€ç”Ÿæˆçš„é“¾æ¥ï¼ˆå¦‚æˆ‘ä»¬çš„å¡ç‰‡é“¾æ¥ï¼‰
- JavaScript ä¸­çš„è·¯ç”±è·³è½¬

### ä¸ºä»€ä¹ˆä½¿ç”¨å­—ç¬¦ä¸²æ‹¼æ¥

æˆ‘ä»¬ä½¿ç”¨ï¼š
```astro
href={`${base}games`}
```

è€Œä¸æ˜¯ï¼š
```astro
href={`${base}/games`}
```

å› ä¸º `BASE_URL` å·²ç»åŒ…å«äº†å°¾éƒ¨çš„ `/`ï¼š
- å¼€å‘ç¯å¢ƒï¼š`/`
- ç”Ÿäº§ç¯å¢ƒï¼š`/life-achievements/`

æ‰€ä»¥æ‹¼æ¥åï¼š
- å¼€å‘ï¼š`/` + `games` = `/games` âœ…
- ç”Ÿäº§ï¼š`/life-achievements/` + `games` = `/life-achievements/games` âœ…

## æ€»ç»“

è¿™ä¸ªä¿®å¤è®©ç½‘ç«™å¯ä»¥ï¼š
- âœ… åœ¨æœ¬åœ°å¼€å‘ç¯å¢ƒæ­£å¸¸è¿è¡Œ
- âœ… åœ¨ GitHub Pages å­ç›®å½•æ­£å¸¸è¿è¡Œ
- âœ… è‡ªåŠ¨æ ¹æ®ç¯å¢ƒåˆ‡æ¢è·¯å¾„
- âœ… æ— éœ€æ‰‹åŠ¨ä¿®æ”¹é…ç½®

ç°åœ¨å¯ä»¥æ„‰å¿«åœ°å¼€å‘å’Œéƒ¨ç½²äº†ï¼ğŸš€
