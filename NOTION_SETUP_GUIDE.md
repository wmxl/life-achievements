# 🎯 Notion 设置完整教程

## 📌 你目前的状态

你已经：
- ✅ 创建了 Notion Integration
- ✅ 获得了 Token: `ntn_q91894510894HaW1PIo1pf3ThDEaQa8NxPA3veLCF2q7Se`
- ✅ 获得了 Database ID: `2e8223bbe5518039b0c1c156ebb70d51`

现在需要：
- 📝 在 Notion 中创建正确的数据库结构
- 🔗 连接数据库到 Integration

---

## 第一步：查看你的数据库

1. **打开 Notion**
2. **找到你的数据库**
   - 这个 Database ID `2e8223bbe5518039b0c1c156ebb70d51` 对应的页面

3. **检查数据库类型**
   - 必须是 Database（带属性的表格）
   - 不能是普通页面

---

## 第二步：配置数据库字段

你的数据库需要包含以下字段（属性）：

### 必需字段

| 字段名称 | Notion 类型 | 说明 | 示例 |
|---------|------------|------|------|
| **Name** | Title（标题） | 游戏名称 | 塞尔达传说：旷野之息 |
| **平台** | Select（单选） | 游戏平台 | PC / Switch / PS5 |
| **评分** | Select（单选） | 星星评分 | ⭐⭐⭐⭐⭐ / ⭐⭐⭐⭐ / ⭐⭐⭐ |
| **完成日期** | Date（日期） | 完成的日期 | 2024-10-14 |
| **状态** | Select（单选） | 游戏状态 | 已完成 / 进行中 / 已放弃 |
| **标签** | Multi-select（多选） | 游戏标签 | 开放世界, 动作, RPG |

### 可选字段

| 字段名称 | Notion 类型 | 说明 | 示例 |
|---------|------------|------|------|
| **游戏时长** | Number（数字） | 游戏小时数 | 120 |
| **Steam链接** | URL（网址） | Steam 页面 | https://store.steampowered.com/... |
| **封面** | Files & media（文件） | 封面图片 | 上传图片 |
| **最爱** | Checkbox（复选框） | 是否最爱 | ✅ / ☐ |
| **评价** | Text（文本） | 详细评价 | 这是我玩过最好的游戏... |

---

## 第三步：创建数据库（如果还没有）

### 方式 A：从头创建

1. **在 Notion 中创建新页面**
2. **输入 `/table`** 或 **`/database`**
3. **选择 "Table - Inline"**
4. **添加上面列出的字段**

### 方式 B：使用模板

我为你准备了完整的数据库结构，按照以下步骤操作：

#### 1. 创建新的 Database

在 Notion 中：
- 点击 **"+ New"** 或使用 `/table`
- 命名为 **"游戏收藏"**

#### 2. 添加属性

点击表格右上角的 **"Properties"**，添加以下字段：

**a. 评分（Select）**
- 字段名：`评分`
- 类型：Select（单选）
- 选项：
  - `⭐` (1 星)
  - `⭐⭐` (2 星)
  - `⭐⭐⭐` (3 星)
  - `⭐⭐⭐⭐` (4 星)
  - `⭐⭐⭐⭐⭐` (5 星)

**b. 平台（Select）**
- 字段名：`平台`
- 类型：Select（单选）
- 选项：PC, Switch, PS5, PS4, Xbox, Mobile, 其他

**c. 状态（Select）**
- 字段名：`状态`
- 类型：Select（单选）
- 选项：已完成, 进行中, 已放弃

**d. 标签（Multi-select）**
- 字段名：`标签`
- 类型：Multi-select（多选）
- 常见选项：开放世界, 动作, RPG, Roguelike, 独立, 像素, 多人, 单人, 恐怖, 解谜

**e. 完成日期（Date）**
- 字段名：`完成日期`
- 类型：Date

**f. 游戏时长（Number）**
- 字段名：`游戏时长`
- 类型：Number
- 单位：可以在后面加 "h" 表示小时

**g. Steam链接（URL）**
- 字段名：`Steam链接`
- 类型：URL

**h. 封面（Files）**
- 字段名：`封面`
- 类型：Files & media

**i. 最爱（Checkbox）**
- 字段名：`最爱`
- 类型：Checkbox

**j. 评价（Text）**
- 字段名：`评价`
- 类型：Text（可以改成 Long text 以支持多行）

---

## 第四步：连接 Integration

**这一步非常重要！**

1. **打开你的游戏数据库页面**

2. **点击右上角的 `•••` (三个点)**

3. **选择 "Add connections"**

4. **搜索并选择你的 Integration**
   - 名称应该类似 "My Integration" 或你自定义的名称

5. **点击 "Confirm"**

**不连接的话，API 无法访问！**

---

## 第五步：添加测试数据

添加一个测试游戏，例如：

| 字段 | 内容 |
|------|------|
| Name | 塞尔达传说：旷野之息 |
| 平台 | Switch |
| 评分 | ⭐⭐⭐⭐⭐ |
| 完成日期 | 2024-01-15 |
| 状态 | 已完成 |
| 游戏时长 | 120 |
| 标签 | 开放世界, 动作, 冒险 |
| Steam链接 | (留空，因为这是 Switch 独占) |
| 最爱 | ✅ |
| 评价 | 这是我玩过最好的开放世界游戏，自由度极高，探索乐趣无穷。 |

---

## 第六步：验证设置

### 本地测试

1. **确保开发服务器正在运行**
   ```bash
   npm run dev
   ```

2. **访问 Notion 版本页面**
   ```
   http://localhost:4321/life-achievements/games-notion
   ```

3. **检查结果**
   - ✅ 能看到游戏列表
   - ✅ 显示了你添加的测试游戏
   - ✅ 能点击查看详情
   - ✅ 封面图片正常显示

### 如果看不到数据

检查：

1. **Integration 是否连接？**
   - 在数据库页面右上角 `•••` → "Connections"
   - 应该能看到你的 Integration

2. **字段名是否正确？**
   - 必须完全匹配（区分大小写）
   - 特别是中文字段：`平台`、`评分`、`状态`、`标签`

3. **数据库 ID 是否正确？**
   - 在数据库页面，查看 URL：
   ```
   https://www.notion.so/xxxxxxxx?v=yyyyyyyy
   ```
   - `xxxxxxxx` 这部分就是 Database ID（去掉 `-` 符号）

4. **查看终端错误**
   - 开发服务器会显示详细的错误信息

---

## 第七步：获取封面图片（免费用户也可用）

### 方式 1：上传到 Notion（推荐）

1. 在 Notion 的 "封面" 字段
2. 点击 "Upload"
3. 选择图片文件
4. Notion 会自动托管这个图片

**优点**：
- 简单直接
- Notion 免费用户可用
- 代码会自动获取 Notion 的图片 URL

### 方式 2：使用外部图片链接

如果你有图片的公开 URL（如 Steam 游戏封面），可以：

1. 在 "封面" 字段选择 "Link"
2. 粘贴图片 URL

### 方式 3：在项目中使用本地图片

将图片放到 `public/images/` 文件夹：
```
public/
  images/
    zelda-botw.jpg
    elden-ring.jpg
```

然后在 Notion 的 "封面" 字段填写：
```
/images/zelda-botw.jpg
```

---

## 🎯 完整示例

假设你要添加 "霓虹深渊2"：

### 在 Notion 中填写

| 字段 | 内容 |
|------|------|
| **Name** | 霓虹深渊2 |
| **平台** | PC |
| **评分** | ⭐⭐⭐⭐ |
| **完成日期** | 2025-10-14 |
| **状态** | 进行中 |
| **游戏时长** | 15 |
| **标签** | Roguelike, 动作, 像素, 赛博朋克 |
| **Steam链接** | https://store.steampowered.com/app/2235200/Neon_Abyss_2/ |
| **封面** | 上传游戏截图 |
| **最爱** | ☐ |
| **评价** | 《霓虹深渊2》是一款充满赛博神话风格的Roguelike动作游戏，支持最多4人在线合作。 |

### 保存后

1. 等待几秒
2. 刷新 `http://localhost:4321/life-achievements/games-notion`
3. 应该能看到新游戏出现！

---

## 📊 数据库视图建议

你可以在 Notion 中创建多个视图：

### 视图 1：全部游戏（表格）
- 默认视图
- 显示所有字段

### 视图 2：最爱游戏
- 筛选条件：`最爱` = `✅`
- 排序：评分降序

### 视图 3：进行中
- 筛选条件：`状态` = `进行中`
- 排序：完成日期降序

### 视图 4：画廊视图
- 类型：Gallery
- 显示封面
- 适合浏览

---

## 🔄 常见问题

### Q1: 免费用户有 API 调用限制吗？

A: 有，但很宽松：
- 免费用户：每秒 3 次请求
- 对于个人网站，完全够用

### Q2: 图片托管在 Notion 会有问题吗？

A: Notion 的图片 URL 会定期刷新（约 1 小时），但：
- 网站每次构建都会重新获取
- 只要定期部署（如每天一次），不会有问题

### Q3: 可以添加其他字段吗？

A: 可以！但需要：
1. 在 Notion 添加字段
2. 修改 `src/lib/notion.ts` 的代码
3. 更新页面模板

### Q4: 数据库可以共享吗？

A: 可以：
- 邀请其他人协作编辑
- 多人可以同时添加游戏

---

## 🎉 下一步

完成设置后：

1. ✅ 添加更多游戏到 Notion
2. ✅ 测试本地预览
3. ✅ 配置 GitHub Secrets
4. ✅ 推送代码部署
5. ✅ 享受新的内容管理体验！

---

## 💡 小技巧

### 快速添加游戏

1. 在 Notion 数据库底部点击 "+ New"
2. 或使用快捷键 `Ctrl/Cmd + N`
3. 填写表单
4. 按 `Ctrl/Cmd + Enter` 保存

### 批量导入

如果有很多游戏要添加：
1. 准备 CSV 文件
2. 在 Notion 数据库右上角 `•••` → "Merge with CSV"
3. 导入数据

### 模板功能

创建一个 "新游戏" 模板：
1. 预填常用标签
2. 设置默认状态为 "进行中"
3. 添加评价提示

---

需要帮助？检查：
- 开发服务器的终端输出
- Notion 的 Integration 设置
- 数据库的连接状态

祝你玩得开心！🎮
